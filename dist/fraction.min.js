/*
Fraction.js v5.0.1 12/16/2024
https://raw.org/article/rational-numbers-in-javascript/

Copyright (c) 2024, Robert Eisele (https://raw.org/)
Licensed under the MIT license.
*/
'use strict';(function(z){function t(){return Error("Invalid argument")}function v(a,d){var c=f,b=g;let e=g;if(void 0!==a&&null!==a)if(void 0!==d){if("bigint"!==typeof a||"bigint"!==typeof a){if(isNaN(d)||isNaN(a))throw t();if(0!==a%1||0!==d%1)throw Error("Parameters must be integer");c=BigInt(a);b=BigInt(d);e=c*b}}else if("object"===typeof a){if("d"in a&&"n"in a)c=BigInt(a.n),b=BigInt(a.d),"s"in a&&(c*=BigInt(a.s));else if(0 in a)c=BigInt(a[0]),1 in a&&(b=BigInt(a[1]));else if(a instanceof BigInt)c=
BigInt(a);else throw t();e=c*b}else if("bigint"===typeof a)e=c=a,b=g;else if("number"===typeof a){if(isNaN(a))throw t();0>a&&(e=-g,a=-a);if(0===a%1)c=BigInt(a);else if(0<a){d=1;var n=0,k=1,l=1;let q=1;1<=a&&(d=10**Math.floor(1+Math.log10(a)),a/=d);for(;1E7>=k&&1E7>=q;)if(b=(n+l)/(k+q),a===b){1E7>=k+q?(c=n+l,b=k+q):q>k?(c=l,b=q):(c=n,b=k);break}else a>b?(n+=l,k+=q):(l+=n,q+=k),1E7<k?(c=l,b=q):(c=n,b=k);c=BigInt(c)*BigInt(d);b=BigInt(b)}}else if("string"===typeof a){b=0;n=d=c=f;k=l=g;a=a.match(/\d+|./g);
if(null===a)throw t();"-"===a[b]?(e=-g,b++):"+"===a[b]&&b++;if(a.length===b+1)d=r(a[b++],e);else if("."===a[b+1]||"."===a[b]){"."!==a[b]&&(c=r(a[b++],e));b++;if(b+1===a.length||"("===a[b+1]&&")"===a[b+3]||"'"===a[b+1]&&"'"===a[b+3])d=r(a[b],e),l=m**BigInt(a[b].length),b++;if("("===a[b]&&")"===a[b+2]||"'"===a[b]&&"'"===a[b+2])n=r(a[b+1],e),k=m**BigInt(a[b+1].length)-g,b+=3}else"/"===a[b+1]||":"===a[b+1]?(d=r(a[b],e),l=r(a[b+2],g),b+=3):"/"===a[b+3]&&" "===a[b+1]&&(c=r(a[b],e),d=r(a[b+2],e),l=r(a[b+
4],g),b+=5);if(a.length<=b)b=l*k,e=c=n+b*c+k*d;else throw t();}else throw t();if(b===f)throw Error("Division by Zero");h.s=e<f?-g:g;h.n=c<f?-c:c;h.d=b<f?-b:b}function r(a,d){try{a=BigInt(a)}catch(c){throw t();}return a*d}function p(a,d){if(d===f)throw Error("Division by Zero");const c=Object.create(w.prototype);c.s=a<f?-g:g;a=a<f?-a:a;c.n=a;c.d=d;return c}function y(a){const d={};let c=a,b=u,e=x-g;for(;e<=c;){for(;c%b===f;)c/=b,d[b]=(d[b]||f)+g;e+=g+u*b++}c!==a?1<c&&(d[c]=(d[c]||f)+g):d[a]=(d[a]||
f)+g;return d}function A(a,d){for(;d%u===f;d/=u);for(;d%x===f;d/=x);if(d===g)return f;a=m%d;let c=1;for(;a!==g;c++)if(a=a*m%d,2E3<c)return f;return BigInt(c)}function B(a,d,c){a=g;var b=m;let e=g;for(;c>f;b=b*b%d,c>>=g)c&g&&(e=e*b%d);b=e;for(c=0;300>c;c++){if(a===b)return BigInt(c);a=a*m%d;b=b*m%d}return 0}function w(a,d){v(a,d);console.log("****************** Fraction - Constructor");if(this instanceof w)this.s=h.s,this.n=h.n,this.d=h.d;else return p(h.s*h.n,h.d)}"undefined"===typeof BigInt&&(BigInt=
function(a){if(isNaN(a))throw Error("");return a});const g=BigInt(1),f=BigInt(0),m=BigInt(10),u=BigInt(2),x=BigInt(5),h={g,n:f,d:g};w.prototype={g,n:f,d:g,abs:function(){return p(this.n,this.d)},add:function(a,d){v(a,d);return p(this.s*this.n*h.d+h.s*this.d*h.n,this.d*h.d)},sub:function(a,d){v(a,d);return p(this.s*this.n*h.d-h.s*this.d*h.n,this.d*h.d)},pow:function(a,d){v(a,d);if(h.d===g)return h.s<f?p((this.s*this.d)**h.n,this.n**h.n):p((this.s*this.n)**h.n,this.d**h.n);if(this.s<f)return null;a=
y(this.n);d=y(this.d);let c=g,b=g;for(let e in a)if("1"!==e){if("0"===e){c=f;break}a[e]*=h.n;if(a[e]%h.d===f)a[e]/=h.d;else return null;c*=BigInt(e)**a[e]}for(let e in d)if("1"!==e){d[e]*=h.n;if(d[e]%h.d===f)d[e]/=h.d;else return null;b*=BigInt(e)**d[e]}return h.s<f?p(b,c):p(c,b)},ceil:function(a){a=m**BigInt(a||0);return p(this.s*a*this.n/this.d+(a*this.n%this.d>f&&this.s>=f?g:f),a)},floor:function(a){a=m**BigInt(a||0);return p(this.s*a*this.n/this.d-(a*this.n%this.d>f&&this.s<f?g:f),a)},round:function(a){a=
m**BigInt(a||0);return p(this.s*a*this.n/this.d+this.s*((this.s>=f?g:f)+a*this.n%this.d*u>this.d?g:f),a)},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(a){function d(l){return"bigint"===typeof l?l:Math.floor(l)}let c=this.n,b=this.d;a=a||15;var e=A(c,b);let n=B(c,b,e),k=this.s<f?"-":"";k+=d(c/b);(c=c%b*m)&&(k+=".");if(e){for(a=n;a--;)k+=d(c/b),c%=b,c*=m;for(k+="(";e--;)k+=d(c/b),c%=b,c*=m;k+=")"}else for(e=a;c&&e--;)k+=d(c/b),c%=b,c*=m;return k}};z.Fraction=w})(this);
